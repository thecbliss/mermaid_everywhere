<html>

<head>
  <title>Mermaid Norfolk</title>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
  <link rel="stylesheet" href="L.Control.Sidebar.css" />
  <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
  <script src="L.Control.Sidebar.js"></script>
  <script src="jquery-2.1.1.min.js"></script>
  <link rel="stylesheet" href="css/map.css">
</head>

<body>
  <div id="sidebar">
    <h1><b>Let's Map Some Ghosts!</b></h1>
    <hr>
    A Maptime HRVA Leaflet How-To
    <br><a href="https://twitter.com/maptimehrva" target="_blank">@maptimehrva</a>  &
      <a href="https://twitter.com/jonahadkins" target="_blank">@jonahadkins</a>
    <br>Mapping local paranormal activity is
      <it>dead</it> simple. Using open source components, the following instructions will guide you to
      <it>other side</it>  of web-mapping. This exercise assumes a
      <it>spooky</it> knowledge of HTML and Javascript - but not at all required. This will step through
      each phase of what you see to the right. Just keep on scrolling down in this panel.
  </div>
  <div class='custom-popup' id="map"></div>
  <script>
    // initialize the map
    var map = L.map('map').setView([37.040, -76.386], 10);
    L.tileLayer(
      'http://{s}.sm.mapstack.stamen.com/($375a80[@60p],(naip,$2c235c[hsl-color@70])[darker],(toner-labels,$000[@20],$38315f[hsl-color])[@50])/{z}/{x}/{y}.png', {
        attribution: 'Map tiles by <a href=”http://stamen.com”>Stamen Design</a>, under <a href=”http://creativecommons.org/licenses/by/3.0”>CC BY 3.0</a>. Data by <a href=”http://openstreetmap.org”>OpenStreetMap</a>, under <a href=”http://creativecommons.org/licenses/by-sa/3.0”>CC BY SA</a>',
        maxZoom: 12,
        minZoom: 10,
      }).addTo(map);

    var sidebar = L.control.sidebar('sidebar', {
      closeButton: false,
      position: 'left'
    });

    map.addControl(sidebar);

    setTimeout(function() {
      sidebar.show();
    }, 500);

     // load GeoJSON from an external file
    $.getJSON("data/mermaid.geojson", function(data) {
      var ratIcon = L.icon({
        iconUrl: 'boo.gif',
        iconSize: [28, 28],
        popupAnchor: [0, -18]
      });
      console.log(data);
      // add GeoJSON layer to the map once the file is loaded
      L.geoJson(data, {
        pointToLayer: function(feature, latlng) {
          var marker = L.marker(latlng, {
            icon: ratIcon
          });
          console.log(feature);
          marker.bindPopup('<b>' + '<font size="3">' + feature.properties.name + '</font>' + '</b>' + '<br/>' + feature.properties.address);
          return marker;
        }
      }).addTo(map);
    });
  </script>
</body>

</html>
